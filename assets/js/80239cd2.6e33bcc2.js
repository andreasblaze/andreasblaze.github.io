"use strict";(self.webpackChunktech_notes=self.webpackChunktech_notes||[]).push([[7006],{3685:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>o});var i=s(5893),t=s(1151);const a={sidebar_position:3},r="SSH",c={id:"linux/ssh",title:"SSH",description:"\u0438\u043b\u0438",source:"@site/docs/linux/ssh.md",sourceDirName:"linux",slug:"/linux/ssh",permalink:"/linux/ssh",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"File System",permalink:"/linux/file-system"},next:{title:"CMD's",permalink:"/linux/cmd"}},l={},o=[{value:"\u041c\u0435\u0441\u0442\u043e, \u0433\u0434\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043a\u043e\u043d\u0444\u0438\u0433 SSH",id:"\u043c\u0435\u0441\u0442\u043e-\u0433\u0434\u0435-\u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f-\u043a\u043e\u043d\u0444\u0438\u0433-ssh",level:2},{value:"\u041b\u043e\u0433\u0438\u043d \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430, \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u0430 \u0438 \u0445\u043e\u0441\u0442\u0430",id:"\u043b\u043e\u0433\u0438\u043d-\u0441-\u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c-\u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0433\u043e-\u043a\u043b\u044e\u0447\u0430-\u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u0430-\u0438-\u0445\u043e\u0441\u0442\u0430",level:2},{value:"\u041b\u043e\u0433\u0438\u043d \u043f\u043e\u0434 \u0440\u0443\u0442\u043e\u043c \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u0430",id:"\u043b\u043e\u0433\u0438\u043d-\u043f\u043e\u0434-\u0440\u0443\u0442\u043e\u043c-\u0441-\u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c-\u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u0430",level:2},{value:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430 \u0438\u0437 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0433\u043e \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430",id:"\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435-\u043f\u0443\u0431\u043b\u0438\u0447\u043d\u043e\u0433\u043e-\u043a\u043b\u044e\u0447\u0430-\u0438\u0437-\u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0433\u043e-\u0441-\u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c-\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430",level:2},{value:"SSH and Git connectivity",id:"ssh-and-git-connectivity",level:2},{value:"Script Timeout and Disconnection",id:"script-timeout-and-disconnection",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"ssh",children:"SSH"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh -l andriibondariev@prod.example.com 10.20.100.200\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"scp -r /* root@10.20.100.200:/usr/lib/zabbix/externalscripts\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u0438\u043b\u0438"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"scp -i myAmazonKey.pem script.sh ubuntu@3.135.180.100:/\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u043c\u0435\u0441\u0442\u043e-\u0433\u0434\u0435-\u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f-\u043a\u043e\u043d\u0444\u0438\u0433-ssh",children:"\u041c\u0435\u0441\u0442\u043e, \u0433\u0434\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043a\u043e\u043d\u0444\u0438\u0433 SSH"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"/etc/ssh/ssh_config\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u043b\u043e\u0433\u0438\u043d-\u0441-\u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c-\u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0433\u043e-\u043a\u043b\u044e\u0447\u0430-\u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u0430-\u0438-\u0445\u043e\u0441\u0442\u0430",children:"\u041b\u043e\u0433\u0438\u043d \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430, \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u0430 \u0438 \u0445\u043e\u0441\u0442\u0430"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh -i ~/.ssh/my_key -l myusername 10.20.100.200\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u043b\u043e\u0433\u0438\u043d-\u043f\u043e\u0434-\u0440\u0443\u0442\u043e\u043c-\u0441-\u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c-\u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u0430",children:"\u041b\u043e\u0433\u0438\u043d \u043f\u043e\u0434 \u0440\u0443\u0442\u043e\u043c \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u0430"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh -i andriibondariev root@10.20.134.204\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435-\u043f\u0443\u0431\u043b\u0438\u0447\u043d\u043e\u0433\u043e-\u043a\u043b\u044e\u0447\u0430-\u0438\u0437-\u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0433\u043e-\u0441-\u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c-\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430 \u0438\u0437 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0433\u043e \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ssh-keygen -y -f /path/to/your/private/key -C "new-comment" > new_public_key.pub\n'})}),"\n",(0,i.jsx)(n.h2,{id:"ssh-and-git-connectivity",children:"SSH and Git connectivity"}),"\n",(0,i.jsx)(n.p,{children:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043a\u043b\u044e\u0447 SSH: \u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0449\u0435 \u043d\u0435\u0442 \u043a\u043b\u044e\u0447\u0430 SSH \u0438\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u0446\u0435\u043b\u0438."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ssh-keygen -t rsa -b 4096 -C "andrii.bondariev@example.com"\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043a\u043b\u044e\u0447\u0430:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"/c/Users/AndreasDesktop/.ssh/example\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 Public Key \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440 Git:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cat /c/Users/AndreasDesktop/.ssh/example.pub\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e ssh-\u0430\u0433\u0435\u043d\u0442 \u0437\u0430\u043f\u0443\u0449\u0435\u043d:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"eval $(ssh-agent -s)\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u044e\u0447\u0435\u0439 \u0430\u0433\u0435\u043d\u0442\u0430 SSH:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh-add -L\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0432\u0430\u0448 \u043a\u043b\u044e\u0447 example \u0443\u043a\u0430\u0437\u0430\u043d \u0432 \u0441\u043f\u0438\u0441\u043a\u0435. \u0415\u0441\u043b\u0438 \u043d\u0435\u0442, \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh-add /c/Users/AndreasDesktop/.ssh/example\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u044f\u043c\u043e\u0435 SSH-\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh -T git@git.example.net\n"})}),"\n",(0,i.jsx)(n.h2,{id:"script-timeout-and-disconnection",children:"Script Timeout and Disconnection"}),"\n",(0,i.jsx)(n.p,{children:'The message "client_loop: send disconnect: Broken pipe" typically indicates that the SSH connection to your server is timing out while your script is still running. This often happens with long-running processes in environments where there\'s a timeout on idle SSH connections.\nSolutions:'}),"\n",(0,i.jsx)(n.p,{children:'Prevent SSH Timeout: You can prevent the SSH session from timing out by sending a "keep alive" signal at regular intervals. This can be done by setting the following options in your SSH configuration (~/.ssh/config):'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plaintext",children:"Host *\n    ServerAliveInterval 60\n    ServerAliveCountMax 120\n"})}),"\n",(0,i.jsx)(n.p,{children:"This configuration sends a keep-alive message every 60 seconds and allows up to 120 missed messages before disconnecting."}),"\n",(0,i.jsx)(n.p,{children:"Using screen or tmux: These tools allow you to run sessions that continue even if you disconnect or log out from the SSH session. Start a screen or tmux session before running your script, which you can then detach from and reattach to later."})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>c,a:()=>r});var i=s(7294);const t={},a=i.createContext(t);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);